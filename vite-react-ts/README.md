# 使用 Vite 构建工具构建 react spa 项目

## Vite 的优势
> Vite —— 一个由 vue 作者尤雨溪开发的 web 开发工具，它具有以下特点：
1. 快速的冷启动
1. 即时的模块热更新
1. 真正的按需编译

可以看出 vite 主要特点是基于浏览器 native 的 ES module 来开发，省略打包这个步骤，因为需要什么资源直接在浏览器里引入即可

## Vite 解决了 Webpack 哪些问题
模块化规范有很多：AMD/CMD（浏览器）， commonJS（服务端）

浏览器对 ES Module 标准的原生支持，改变了这种情况。目前大多数浏览器已经支持通过 `<script type="module">` 的方式和 `import` 的方式加载标准的 `ES` 模块，但是需要本地服务支持，随着项目的复杂度升级，代码规范和管理就必须要同步提升。于是，编程社区中提出了多种模块化规范，服务端选择了 `CommonJS` 规范，客户端选择 `AMD` 规范较多，但是，两种模块化规范也都存在一定的问题，他们拥有两套模块化规范，所以 `ES6` 提出了 `ES Modules` 规范

### 先了解下 Webpack 帮我们做了什么事
模块化可以帮助我们更好地解决复杂应用开发过程中的代码组织问题，但是随着模块化思想的引入，我们的前端应用又会产生了一些新的问题，比如：
-  需要解决兼容问题
-  太零散的模块会导致浏览器请求量的增加

所以 webpack 帮我们写好的模块代码进行处理，让浏览器识别我们写的模块代码。最后可以打包输出一个js文件，以一种串联的方式管理好了这些模块

#### 1. commonJS 方式
它模拟了 `module`，`exports`，`require` 变量，将我们的模块代码打包成一个 `IIFE`，函数参数是我们写的各个模块被包装之后组成的数组，浏览器执行这个立即执行函数就可以运行我们的模块代码

生成项目目录，vite-react-ts 是项目名称，官方模板 `react 17+ typescript 4+`
```
yarn create vite vite-react-ts --template react-ts
```

添加 `css` 预编译器，项目中 `less` 文件的命名都要以 `module.less` 结尾
```
yarn add less
```
添加 `git` 代码提交校验 `yorkie`，作用是在 `git` 的整个生命周期内提供 `hook` 函数，实现格式化代码，检验提交信息之类的工作，在代码提交之前，进行代码规则检查能够确保进入 `git` 库的代码都是符合代码规则的。但是整个项目上运行 `lint` 速度会很慢，`lint-staged` 能够让 `lint` 只检测暂存区的文件

```
yarn add yorkie lint-staged -D
```
